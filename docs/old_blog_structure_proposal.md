# 自作シミュレータで挑む自動運転AIチャレンジ：テックブログ連載構成案

全体テーマ：AWSIM+Autowareのデータ収集課題を解決し、100倍高速な自作シミュレータで挑むE2E自動運転

---

## 記事1: 【爆速】AWSIMが重すぎるので、100倍高速なPythonオレオレシミュレータを作った話
**テーマ**: 動機とシミュレータ構築のこだわり

### 1. はじめに：なぜ作ったのか
- **課題認識**:
  - AWSIM (Unityバイナリ) + Autowareの構成はリアルだが、データ収集において「実時間」に近い時間がかかる。
  - 数万エピソードの学習には時間が足りない。
  - 初期位置や障害物配置の自由度が低く、エッジケース（復帰能力など）の効率的な収集が難しい。
- **解決策**:
  - Pythonベースの軽量プロキシ・シミュレータを自作。
  - 目標：**100倍の高速化**と**完全な制御**。

### 2. シミュレータの「こだわり」設計
- **Unity物理挙動の完全再現（システム同定）**:
  - 単なるキネマティックモデルではなく、実環境（Unity）からデータを集めてパラメータ同定。
  - **ステアリング応答**: 無駄時間＋1次遅れ系 (FOPDT) モデルを採用し、Unity特有の遅延を再現。
  - **縦方向ダイナミクス**: 空気抵抗とコーナリングドラッグを考慮。
- **アーキテクチャ**:
  - Gymライクなインターフェースで強化学習/模倣学習に直結。
  - 描画負荷を排除（Headless動作）して速度を最大化。

### 3. ベンチマーク結果
- 実時間比での高速化倍率（例: 100倍以上）。
- 分散処理への適性（CPU数に応じてリニアにスケール）。

---

## 記事2: 自作シミュレータでMLOps！TinyLidarNetでコースを1周走るまで
**テーマ**: MLOpsフローの構築と基礎走行（障害物なし）

### 1. 開発フロー（MLOps）の全体像
- **パイプライン構築**:
  - `Collection` (並列収集) -> `Extraction` (成功・失敗選別) -> `Training` -> `Evaluation`。
- **ツール選定**:
  - 実験管理: MLflow / WandB。
  - 可視化: Foxglove (MCAP形式でのログ出力で、Webブラウザから即座に解析可能に)。

### 2. データ収集戦略：Random Start
- **目的**: コースのどこからでもセンターラインに復帰し、1周走りきる能力。
- **手法**:
  - コース上のランダムな位置・姿勢・速度からエピソードを開始。
  - 「正常な走行」だけでなく「少しズレた状態からの復帰」を大量に学習させる（DAagger的な効果をオフラインで狙う）。
  - 教師アルゴリズム: Pure Pursuit。

### 3. 学習と検証
- モデルアーキテクチャ: Tiny Lidar Net (1D CNN)。
- 障害物なし環境での完走率100%達成までの道のり。
- 自作シミュレータで学習したモデルを、本家AWSIMに戻して動かしてみた結果（Sim-to-Sim転移の予備検証）。

---

## 記事3: 教師を超えろ！障害物回避ありでコース1周への挑戦
**テーマ**: 高度なシナリオ（障害物回避）と教師あり学習の限界突破

### 1. 障害物回避の難しさ
- 固定の教師（Pure Pursuit + 単純な回避ロジック）では、最適な回避ライン取りが難しい。
- 教師データ作成の課題：教師アルゴリズム自体が下手だと、生徒も下手になる。

### 2. シミュレータ側での工夫：Track Forward
- **効率的なデータ収集**:
  - スタート地点から常に「10m先に障害物がある」状況を生成。
  - 1エピソード7秒で終了（回避行動のみを濃縮して学習）。
  - これにより、何もない直線を走るだけの無駄なデータを排除し、回避密度を最大化。

### 3. 教師アルゴリズム vs 学習モデル
- **教師アルゴリズム**:
  - Lateral Shift (障害物を検知して横にズレる) + Pure Pursuit。
  - 欠点: 挙動がカクつきやすく、急な回避で不安定になりがち。
- **学習モデル（Tiny Lidar Net）**:
  - 結果：教師よりも滑らかで、かつ成功率が高い。
  - なぜ教師を超えたか？（データの「良いとこ取り」と汎化性能、人間の操作に頼らない大量試行）。

### 4. 最終成果
- 障害物ありコースでの連続周回成功。
- まとめ：自作シミュレータ＋MLOpsによる高速PDCAサイクルの勝利。
